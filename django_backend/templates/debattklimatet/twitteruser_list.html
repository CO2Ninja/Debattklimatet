<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/smoothness/jquery-ui.css" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"> </script>
    </head>

<body>

<style>
body { 
  background: url('/static/TheBackground.png') no-repeat bottom fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}
	
footer {
    position: absolute;
    left: 0;
    bottom: 0;
    height: 15%;
    width: 100%;
}
#box {
    display: inline-block;
    padding: 16px;
    margin: 10px 0;
    max-width: 600px;
    border: #ddd 1px solid;
    border-top-color: #eee;
    border-bottom-color: #bbb;
    border-radius: 5px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    font: bold 14px/18px Helvetica, Arial, sans-serif;  
  }
#content {
    display: inline-block;
    padding: 5px;
    margin: 5px 0;
    border: #ddd 1px solid;
    border-top-color: #eee;
    border-bottom-color: #bbb;
    border-radius: 5px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.15);
    background-color:#EEEEEE;
    font: bold 14px/18px Helvetica, Arial, sans-serif;
    color: #000;
    } 
</style>	
	
<div style="width:100%;margin:0px auto;">
    {% for party in object_list %}
    <img src="/static/{{party.id}}.png" id="{{party.id}}" style="display:none;width:30%;height:30%;">
    {% endfor %}



    <div id="canvas_container" style="float:left;margin-left:5%;text-align:left;">
        <canvas id="canvas" style="float:left; width:100%"></canvas>
    </div>
        <div id="test" style="width:20%;float:right;margin-right:5%;margin-top:1%">
            <div id="header" style="float:left;">
                <h2>Tweets</h2> </div>
            <div id="header-img" style="float:left;margin-left:10%">     
                <img src="/static/bird_blue_48.png"></div>
        </div>
    <div id="tweetlist" style="float:right;width:30%;position:relative;;margin-right:1%"></div>

    <footer>
    <div style="width:60%;margin:0px auto;text-align:center">
        <div id="box">
            <div id="content" >
                Vi är fyra dataloger från KTH som delar uppfattningen att miljö och hållbarhet är vår tids absolut
                viktigaste fråga. Därför vill vi belysa hur partierna prioriterar miljön i debatten. 
                Vi bedömer inte politiken, men vill uppmärksamma miljön och skapa debatt.</div>
        </div>
    </div>
    </footer>

</div>
<script>
setTimeout(function() {
      window.location.reload(true); 
    }, 200000);
window.onload = function() {
	document.getElementById("tweetlist").style.height= Math.round(window.innerHeight*0.80) + "px";

    var context = document.getElementById("canvas").getContext("2d");
    
    context.canvas.width  = window.innerWidth*0.9-document.getElementById("tweetlist").offsetWidth -30;
	context.canvas.height = window.innerHeight*0.85 - 150;

	var step = (context.canvas.height-180)/{{maxscore}};
	
    {% for party in object_list %}
        context.drawImage(document.getElementById("{{party.id}}"), {{forloop.counter0}}*((context.canvas.width-95)/7), context.canvas.height-170-{{party.totalscore}}*step, 90, 105);
    {% endfor %}

    document.getElementById("tweetlist").innerHTML='<object type="text/html" data="/tweets/" style="height:100%;width:100%" ></object>';
}
</script>
</body>
